<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Courses</title>
</head>
<body>
    {% include 'header.html' %}
    {% for message in get_flashed_messages() %}
        <div class="alert alert-{{ message[1] }}">
            {{ message[0] }}
        </div>
    {% endfor %}
    <script src="{{ url_for('static', filename='js/courses.js') }}"></script>
    <div class="container">
        {% include 'admin_menu.html' %}
        <div class="content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-10">
                        <a href="#"><strong><span class="ti-harddrives"></span> Courses Section</strong></a>
                    </div>
                    <div class="col-md-2" align="right">
                        <button type="button" name="add" id="addCourse" class="btn btn-success btn-xs">Add New Course</button>
                    </div>
                </div>
                <hr>
                <!-- Search form -->
                <form method="GET" action="{{ url_for('search_courses') }}">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <input type="text" class="form-control" name="student_name" placeholder="Enter Student Name to Search">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <input type="text" class="form-control" name="lecturer_name" placeholder="Enter Lecturer Name to Search">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <input type="text" class="form-control" name="course_id" placeholder="Enter Course ID to Search">
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Search</button>
                </form>
                <div id="searchResults"></div>
                <!-- End of Search form -->
                <div class="panel-heading">
                    <table id="classList" class="table table-bordered table-striped">
                        <thead>
                            <tr>                                
                                <th>Course Code</th>
                                <th>Course Name</th>
                                <th>Lecturer ID</th>
                                <th>Lecturer Name</th>                                
                            </tr>
                        </thead>
                        <tbody>
                            {% for course in courses %}
                            <tr>                                
                                <td>{{ course['CourseCode'] }}</td>
                                <td>{{ course['CourseName'] }}</td>
                                <td>{{ course['lecturer_id'] }}</td>
                                <td>{{ course['FirstName'] }} {{ course['LastName'] }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
	<div id="classModal" class="modal fade">
		<div class="modal-dialog">
			<form method="post" id="courseForm" action="{{ url_for('save_course') }}">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title"><i class="fa fa-plus"></i> Create Course</h4>
					</div>
					<div class="modal-body">
						<div class="form-group">
							<label for="code" class="control-label">Course Code*</label>
							<input type="text" class="form-control" id="code" name="ccode" placeholder="Course Code" required>
						</div>
						<div class="form-group">
							<label for="cname" class="control-label">Course Name*</label>
							<input type="text" class="form-control" id="cname" name="cname" placeholder="Course Name" required>
						</div>
						<div class="form-group">
							<label for="lname" class="control-label">Assign Lecturer*</label>
							<select name="lname" id="lname" class="form-control" required>
								<option value="">--Select--</option>
								{% for lecturer in lecturers %}
									<option value="{{ lecturer['lecturer_id'] }}">{{ lecturer['lecturer_name'] }}</option>
								{% endfor %}
							</select>
						</div>
					</div>
					<div class="modal-footer">
						<input type="hidden" name="action" value="addCourse">
						<input type="submit" name="save" id="save" class="btn btn-info" value="Save">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
			</form>
		</div>
	</div>
	

    <div id="editModal" class="modal fade">
        <div class="modal-dialog">
            <form method="post" id="editForm" action="{{ url_for('save_course') }}">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="edit-title"><i class="fa fa-plus"></i> Edit Course</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="edit-cid" class="control-label">Course ID*</label>
                            <input type="text" class="form-control" id="edit-cid" name="edit-cid" required>
                        </div>
                        <div class="form-group">
                            <label for="edit-cname" class="control-label">Course Name*</label>
                            <input type="text" class="form-control" id="edit-cname" name="edit-cname" required>
                        </div>
                        <div class="form-group">
                            <label for="edit-lecturer" class="control-label">Assign Class Teacher*</label>
                            <select name="edit-lecturer" id="edit-lecturer" class="form-control" required>
                                <option value="">--Select--</option>
                                {% for lecturer in lecturers %}
                                <option value="{{ lecturer['lecturer_id'] }}">{{ lecturer['lecturer_name'] }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <input type="hidden" name="edit-classid" id="edit-classid">
                        <input type="submit" name="edit-save" id="edit-save" class="btn btn-info" value="Save">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

</body>
</html>
